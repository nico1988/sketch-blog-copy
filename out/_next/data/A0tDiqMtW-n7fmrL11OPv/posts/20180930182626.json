{"pageProps":{"post":{"fileName":"2018-09-30_JS获取图片原始宽高.md","id":"2018-09-30_JS获取图片原始宽高","permalink":"20180930182626","tags":["js"],"title":"JS获取图片原始宽高","date":"2018-09-30T18:26:26+08:00","categories":["笔记"],"cover":"https://cloud.miiiku.xyz/src/images/cover/cover-09.jpg","pageview":161,"contentHtml":"<p>最近在给博客的相册模块做优化，需要知道图片的原始大小，我以前的做法是把图片的真实宽高分别放在data-width和data-height中，效果是达到了，但是总觉得扩展性很低，当不知道图片的大小时，还要一张一张图片的去查看图片信息手动输入图片大小，很繁琐</p>\n<h3>获取图片大小：</h3>\n<h5>1.使用<em>innerWidth</em>,<em>innerHeight</em></h5>\n<p>使用HTMLImageElement.innerWidth 是可以拿到图片的宽度 但是需要注意的是这里拿到的宽度是<strong>图像在CSS像素中渲染的宽度</strong></p>\n<p>也就是说如果图片原始大小1200，使用css或者width属性设置为600，那么这里拿到的宽度为600，显然用innerWidth获取图片原始尺寸是不靠谱的</p>\n<h5>2.使用<em>document.createElement(“img”)</em></h5>\n<pre class=\"hljs\"><code>var img = document.createElement(\"img\")\nimg.src = \"1.jpg\"\nvar width = img.width\n</code></pre>\n<p>动态创建一个imgElement，通过给src赋值，最终来获取img的宽和高</p>\n<p>需要注意的是在给img的src赋值时，这是一个异步过程，会存在获取img的宽度时值为0(图片还未加载完成)，可以在给img赋值之前加上<em>onload</em>事件</p>\n<pre class=\"hljs\"><code>var img = document.createElement(\"img\")\nimg.onload = function () {\n    var width = img.width\n}\nimg.src = \"1.jpg\"\n</code></pre>\n<h5>3.使用<em>naturalWidth</em>(推荐)</h5>\n<p>使用HTMLImageElement.naturalWidth拿到<strong>图像在CSS像素中固有的宽度,如果可用的话; 否则, 返回0</strong></p>\n<p>这样就可以拿到图片的原始大小</p>\n<p>ps:各位国庆节快乐！</p>\n<p>以上</p>\n"}},"__N_SSG":true}