{"pageProps":{"post":{"fileName":"2018-12-28_git删除全部提交历史，成为一个新的仓库.md","id":"2018-12-28_git删除全部提交历史，成为一个新的仓库","permalink":"20181228175943","tags":["git","github"],"title":"git删除全部提交历史，成为一个新的仓库","date":"2018-12-28T17:59:43+08:00","categories":["笔记"],"cover":"https://cloud.miiiku.xyz/src/images/cover/cover-07.jpg","pageview":89,"contentHtml":"<p>有时候在提交代码时，不小心提交了敏感数据，如账号密码什么的，这样在历史记录中就可以查看到，这样很不安全，所以就需要吧历史提交记录删了，变成一个新的仓库。</p>\n<p>记录一下方法:</p>\n<h3>创建一个新的分支</h3>\n<pre class=\"hljs\"><code>git checkout --orphan latest_branch\n</code></pre>\n<h3>添加所有文件</h3>\n<pre class=\"hljs\"><code>git add -A\n</code></pre>\n<h3>提交更改</h3>\n<pre class=\"hljs\"><code>git commit -am \"commit\"\n</code></pre>\n<h3>删除需要替换的分支</h3>\n<pre class=\"hljs\"><code>git branch -D master\n</code></pre>\n<h3>重命名创建的分支为删除的分支</h3>\n<pre class=\"hljs\"><code>git branch -m master\n</code></pre>\n<h3>强制提交到远程仓库</h3>\n<pre class=\"hljs\"><code>git push -f origin master\n</code></pre>\n<p>这样以后在去看master分支，就是一个全新的仓库惹，所以提交记录都没有惹</p>\n<p>以上！</p>\n"}},"__N_SSG":true}