{"pageProps":{"post":{"fileName":"2019-05-22_ä½¿ç”¨Azure-DevOpsåˆ›å»ºCI-CDå®ç°è‡ªåŠ¨æ„å»ºå‘å¸ƒ.md","id":"2019-05-22_ä½¿ç”¨Azure-DevOpsåˆ›å»ºCI-CDå®ç°è‡ªåŠ¨æ„å»ºå‘å¸ƒ","permalink":"20190523015703","tags":["DevOps"],"title":"ä½¿ç”¨Azure DevOpsåˆ›å»ºCI/CDå®ç°è‡ªåŠ¨æ„å»ºå‘å¸ƒ","date":"2019-05-23T01:57:03+08:00","subtitle":null,"categories":["ç¬”è®°"],"cover":"https://qiniu.sukoshi.xyz/attach/2019/05/WX20190522-184111@2x0.png","contentHtml":"<p>ç›®å‰åšå®¢é¡¹ç›®ä»£ç æ˜¯æ”¾åœ¨GitHubä¸Šçš„ï¼Œæ¯æ¬¡å‘å¸ƒäº†æ–°äº†æ–‡ç« ä¼šå¾€GitHubä¸Šæ¨é€ä¸€æ¬¡ï¼Œè¿˜ä¼šå¾€æ‰˜ç®¡åšå®¢çš„æœåŠ¡å™¨æ¨é€ä¸€æ¬¡ï¼Œå¾ˆç¹ç</p>\n<p>å¶ç„¶çœ‹åˆ°å¯ä»¥ä½¿ç”¨å¾®è½¯çš„Azure DevOpsæ¥åˆ›å»ºCI/CDè‡ªåŠ¨æ„å»ºéƒ¨ç½²åˆ°æœåŠ¡å™¨ï¼Œè¿™æ ·ä»¥æ¥æ¯æ¬¡åœ¨æœ¬åœ°å‘å¸ƒæ–°çš„æ–‡ç« ï¼Œç›´æ¥pushåˆ°GitHubå°±å¯ä»¥æ‘¸é±¼ï¼Œç­‰å¾…å‡ åˆ†é’Ÿåçº¿ä¸Šåšå®¢å·²ç»è‡ªåŠ¨æ›´æ–°ï¼Œç¾æ»‹æ»‹ã€‚</p>\n<p>ç¬¬ä¸€æ¬¡ä½¿ç”¨Azure Devopsï¼Œç£•ç£•ç¢°ç¢°çš„æµ‹è¯•äº†å¾ˆä¹…ï¼Œæ–‡æ¡£ç›®å‰è¿˜æ²¡æœ‰ä¸­æ–‡çš„ï¼Œå…¨é è°·æ­Œç¿»è¯‘ï¼Œæœ‰äº›åœ°æ–¹è‡ªå·±ä¹Ÿä¸æ˜¯å¤ªæ˜ç™½ï¼Œä½†å¥½æ­¹ç°åœ¨æ„Ÿè§‰å¼„å¥½äº†ğŸ˜‚</p>\n<p>å…³äºCI/CDçš„æ–‡ç« ç½‘ä¸Šä¸€å¤§å †ï¼Œä¸“ä¸šæœ¯è¯­ä¹Ÿå¾ˆå¤šï¼Œçœ‹çš„è´¹ç¥å°±ä¸åšå¤šè¯´äº†ğŸ˜‚ğŸ˜‚ğŸ˜‚</p>\n<p><img src=\"https://qiniu.sukoshi.xyz/attach/2019/05/WX20190522-184111@2x0.png\" alt=\"https://qiniu.sukoshi.xyz/attach/2019/05/WX20190522-184111@2x0.png\" loading=\"lazy\"></p>\n<p>å…³äºAzure DevOpsç›¸å…³æ–‡æ¡£å¯ä»¥æŸ¥çœ‹<a href=\"https://docs.microsoft.com/en-us/azure/devops/pipelines/?view=azure-devops\" target=\"_blank\" rel=\"noopener\">https://docs.microsoft.com/en-us/azure/devops/pipelines/?view=azure-devops</a></p>\n<p><strong>åˆ›å»ºCI</strong></p>\n<p><img src=\"https://qiniu.sukoshi.xyz/attach/2019/05/WX20190522-182619@2x1.png\" alt=\"https://qiniu.sukoshi.xyz/attach/2019/05/WX20190522-182619@2x1.png\" loading=\"lazy\"></p>\n<p>åœ¨<em>Pipelines</em>ä¸­æ–°å»ºä¸€ä¸ª<em>Builds</em>ç®¡é“ä»»åŠ¡</p>\n<p>æˆ‘çš„é…ç½®å¦‚ä¸‹</p>\n<pre class=\"hljs language-yml\"><code class=\"language-yml\"><span class=\"hljs-comment\"># Starter pipeline</span>\n<span class=\"hljs-comment\"># Start with a minimal pipeline that you can customize to build and deploy your code.</span>\n<span class=\"hljs-comment\"># Add steps that build, run tests, deploy, and more:</span>\n<span class=\"hljs-comment\"># https://aka.ms/yaml</span>\n\n<span class=\"hljs-attr\">trigger:</span>\n<span class=\"hljs-bullet\">-</span> <span class=\"hljs-string\">master</span>\n\n<span class=\"hljs-attr\">pool:</span>\n  <span class=\"hljs-attr\">vmImage:</span> <span class=\"hljs-string\">&#x27;Ubuntu-latest&#x27;</span>\n\n<span class=\"hljs-attr\">steps:</span>\n\n<span class=\"hljs-comment\"># ä½¿ç”¨nodejs</span>\n<span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">task:</span> <span class=\"hljs-string\">UseNode@1</span>\n  <span class=\"hljs-attr\">inputs:</span>\n    <span class=\"hljs-attr\">checkLatest:</span> <span class=\"hljs-literal\">true</span>\n  <span class=\"hljs-attr\">displayName:</span> <span class=\"hljs-string\">&#x27;Install Node.js&#x27;</span>\n\n<span class=\"hljs-comment\"># å®‰è£…npmåŒ…</span>\n<span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">task:</span> <span class=\"hljs-string\">Npm@1</span>\n  <span class=\"hljs-attr\">inputs:</span>\n    <span class=\"hljs-attr\">command:</span> <span class=\"hljs-string\">&#x27;install&#x27;</span>\n  <span class=\"hljs-attr\">displayName:</span> <span class=\"hljs-string\">&#x27;npm install&#x27;</span>\n\n<span class=\"hljs-comment\"># å…¨å±€å®‰è£…hexo</span>\n<span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">task:</span> <span class=\"hljs-string\">Npm@1</span>\n  <span class=\"hljs-attr\">inputs:</span>\n    <span class=\"hljs-attr\">command:</span> <span class=\"hljs-string\">&#x27;custom&#x27;</span>\n    <span class=\"hljs-attr\">customCommand:</span> <span class=\"hljs-string\">&#x27;install hexo -g&#x27;</span>\n  <span class=\"hljs-attr\">displayName:</span> <span class=\"hljs-string\">&#x27;npm install hexo -g&#x27;</span>\n\n<span class=\"hljs-comment\"># ç”Ÿæˆåšå®¢é™æ€æ–‡ä»¶</span>\n<span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">task:</span> <span class=\"hljs-string\">Bash@3</span>\n  <span class=\"hljs-attr\">inputs:</span>\n    <span class=\"hljs-attr\">targetType:</span> <span class=\"hljs-string\">&#x27;inline&#x27;</span>\n    <span class=\"hljs-attr\">script:</span> <span class=\"hljs-string\">&#x27;hexo g&#x27;</span>\n  <span class=\"hljs-attr\">displayName:</span> <span class=\"hljs-string\">&#x27;hexo g&#x27;</span>\n\n<span class=\"hljs-comment\"># - task: ArchiveFiles@2</span>\n<span class=\"hljs-comment\">#   inputs:</span>\n<span class=\"hljs-comment\">#     rootFolderOrFile: &#x27;$(Build.BinariesDirectory)&#x27;</span>\n<span class=\"hljs-comment\">#     includeRootFolder: true</span>\n<span class=\"hljs-comment\">#     archiveType: &#x27;zip&#x27;</span>\n<span class=\"hljs-comment\">#     archiveFile: &#x27;$(Build.ArtifactStagingDirectory)/$(Build.BuildId).zip&#x27;</span>\n<span class=\"hljs-comment\">#     replaceExistingArchive: true</span>\n<span class=\"hljs-comment\">#     verbose: true</span>\n<span class=\"hljs-comment\">#   displayName: &#x27;zip file&#x27;</span>\n\n<span class=\"hljs-comment\"># å¯¹ç”Ÿäº§çš„é™æ€æ–‡ä»¶æ‰“åŒ…</span>\n<span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">task:</span> <span class=\"hljs-string\">ArchiveFiles@2</span>\n  <span class=\"hljs-attr\">inputs:</span>\n    <span class=\"hljs-attr\">rootFolderOrFile:</span> <span class=\"hljs-string\">&#x27;$(System.DefaultWorkingDirectory)/public&#x27;</span>\n    <span class=\"hljs-attr\">includeRootFolder:</span> <span class=\"hljs-literal\">false</span>\n    <span class=\"hljs-attr\">archiveType:</span> <span class=\"hljs-string\">&#x27;zip&#x27;</span>\n    <span class=\"hljs-attr\">archiveFile:</span> <span class=\"hljs-string\">&#x27;$(Build.ArtifactStagingDirectory)/file.zip&#x27;</span>\n    <span class=\"hljs-attr\">replaceExistingArchive:</span> <span class=\"hljs-literal\">true</span>\n  <span class=\"hljs-attr\">displayName:</span> <span class=\"hljs-string\">&#x27;zip file&#x27;</span>\n\n<span class=\"hljs-comment\"># å§æ‰“åŒ…çš„æ–‡ä»¶ä¸Šä¼ åˆ°ä¸´æ—¶ä»£ç†å®¹å™¨ä¸­</span>\n<span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">task:</span> <span class=\"hljs-string\">PublishBuildArtifacts@1</span>\n  <span class=\"hljs-attr\">inputs:</span>\n    <span class=\"hljs-attr\">PathtoPublish:</span> <span class=\"hljs-string\">&#x27;$(Build.ArtifactStagingDirectory)/file.zip&#x27;</span>\n    <span class=\"hljs-attr\">ArtifactName:</span> <span class=\"hljs-string\">&#x27;blog&#x27;</span>\n    <span class=\"hljs-attr\">publishLocation:</span> <span class=\"hljs-string\">&#x27;Container&#x27;</span>\n\n<span class=\"hljs-comment\"># ä¸€ä¸ªæˆåŠŸåˆ°æç¤ºï¼Œæ²¡ä»€ä¹ˆç”¨</span>\n<span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">script:</span> <span class=\"hljs-string\">echo</span> <span class=\"hljs-string\">success</span>\n  <span class=\"hljs-attr\">displayName:</span> <span class=\"hljs-string\">&#x27;end...&#x27;</span>\n\n</code></pre>\n<p><strong>åˆ›å»ºCD</strong></p>\n<p><img src=\"https://qiniu.sukoshi.xyz/attach/2019/05/WX20190522-184346@2x2.png\" alt=\"https://qiniu.sukoshi.xyz/attach/2019/05/WX20190522-184346@2x2.png\" loading=\"lazy\"></p>\n<p>è¿™é‡Œéœ€è¦è®¾ç½®è§¦å‘æ–¹å¼ï¼Œæ¯æ¬¡æ–°æ„å»ºæˆåŠŸåè‡ªåŠ¨è§¦å‘CDéƒ¨ç½²ä»£ç </p>\n<p><img src=\"https://qiniu.sukoshi.xyz/attach/2019/05/WX20190522-184537@2x3.png\" alt=\"https://qiniu.sukoshi.xyz/attach/2019/05/WX20190522-184537@2x3.png\" loading=\"lazy\"></p>\n<p>åœ¨CDä¸­ï¼Œæˆ‘åˆ›å»ºäº†ä¸¤ä¸ªä»»åŠ¡ï¼Œç¬¬ä¸€ä¸ªæ˜¯å§CIä¸­æ‰“åŒ…çš„æ–‡ä»¶ä¸Šä¼ åˆ°è‡ªå·±çš„æœåŠ¡å™¨ï¼Œç¬¬äºŒä¸ªåˆ™æ˜¯å§å·²ç»ä¸Šä¼ çš„å‹ç¼©åŒ…è§£å‹å‡ºæ¥å¹¶åˆ é™¤å‹ç¼©åŒ…ï¼Œè¿™æ ·å°±å®ç°äº†çº¿ä¸Šåšå®¢çš„æ›´æ–°ã€‚</p>\n<p><img src=\"https://qiniu.sukoshi.xyz/attach/2019/05/WX20190522-185448@2x4.png\" alt=\"https://qiniu.sukoshi.xyz/attach/2019/05/WX20190522-185448@2x4.png\" loading=\"lazy\"></p>\n<p><img src=\"https://qiniu.sukoshi.xyz/attach/2019/05/WX20190522-185620@2x5.png\" alt=\"https://qiniu.sukoshi.xyz/attach/2019/05/WX20190522-185620@2x5.png\" loading=\"lazy\"></p>\n<p>æ•´ä¸ªå¤§æ¦‚æµç¨‹å°±æ˜¯è¿™æ ·äº†ï¼Œå†™çš„å¹¶ä¸æ¸…æ¥šï¼Œä¸€äº›åœ°æ–¹æ²¡æœ‰è¯´åˆ°ï¼Œä¸»è¦æ˜¯å«Œå¼ƒéº»çƒ¦ğŸ˜‚ï¼Œå˜›ï¼Œåæ­£åªæ˜¯ä¸€æ¬¡è®°å½•ï¼Œä¸è¦åœ¨æ„å¤ªå¤šç»†èŠ‚ã€‚ã€‚ã€‚ã€‚</p>\n"}},"__N_SSG":true}